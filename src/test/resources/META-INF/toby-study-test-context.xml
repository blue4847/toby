<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	   xmlns:context="http://www.springframework.org/schema/context"
	   xsi:schemaLocation=
			   "http://www.springframework.org/schema/beans
	   http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd"
>
	<!-- 테스트를 위한 수정된 DI 설정을 가진 bean -->

	<context:annotation-config />
    <!-- Jdbc -->
	<bean id="userServiceJdbc" class="toby.study.service.UserServiceTx">
		<property name="userService" ref="userServiceImplJdbc" />
		<property name="transactionManager" ref="transactionManagerJdbc"/>
	</bean>

	<bean id="userServiceImplJdbc" class="toby.study.service.UserServiceImpl">
		<property name="userDao" ref="userDaoJdbc"/>
		<property name="userLevelUpgradePolicy" ref="userLevelUpgradePolicy"/>
		<property name="mailSender" ref="dummyMailSender" />
	</bean>

	<!-- JPA -->
	<bean id="userServiceJpa" class="toby.study.service.UserServiceTx">
		<property name="userService" ref="userServiceImplJpa"/>
		<property name="transactionManager" ref="transactionManagerJpa"/>
	</bean>

	<bean id="userServiceImplJpa" class="toby.study.service.UserServiceImpl">
		<property name="userDao" ref="userDaoJpa"/>
		<property name="userLevelUpgradePolicy" ref="userLevelUpgradePolicy"/>
		<property name="mailSender" ref="dummyMailSender" />
	</bean>
    <!-- 테스트를 위한 아무런 기능을 하지 않는 MailSender -->
	<bean id="dummyMailSender" class="toby.study.service.DummyMailSender" />
</beans>
